<p *ngIf="loading">Loading registryâ€¦</p>
<p *ngIf="error">{{ error }}</p>

<section *ngIf="registry && !loading">
  <a [routerLink]="['/registries', registry.id, 'edit']">
    âœï¸ Edit Registry
  </a>

  <button (click)="deleteRegistry()" style="color: red; margin-left: 10px;">
  ğŸ—‘ Delete Registry
  </button>


  <h1>{{ registry.eventName }}</h1>
  <p><strong>Owner:</strong> {{ registry.ownerName }}</p>
  <p><strong>Date:</strong> {{ registry.date }}</p>
  <p><strong>Description:</strong> {{ registry.description }}</p>

  <hr />

  <h2>Items</h2>

  <form (ngSubmit)="addItem()" style="margin-bottom: 1rem;">
  <input
    type="text"
    placeholder="Item name"
    [(ngModel)]="newItem.name"
    name="itemName"
    required
  />

  <input
    type="number"
    placeholder="Price"
    [(ngModel)]="newItem.price"
    name="itemPrice"
    min="0.01"
    step="0.01"
    required
  />

  <input
    type="number"
    placeholder="Quantity"
    [(ngModel)]="newItem.quantity"
    name="itemQuantity"
    min="1"
    required
  />

  <button type="submit">â• Add Item</button>
</form>

  <ul>
    <li *ngFor="let item of registry.items">
      {{ item.name }} â€” {{ item.quantity }} Ã— {{ item.price }}
      <span *ngIf="item.purchased"> âœ… Purchased</span>

      <button *ngIf="!item.purchased" (click)="markPurchased(item.id)">
        Mark as Purchased
      </button>
    </li>
  </ul>

  <hr />

  <h2>Guests</h2>

  <form (ngSubmit)="addGuest()" style="margin-bottom: 1rem;">
  <input
    type="text"
    placeholder="Guest name"
    [(ngModel)]="newGuest.name"
    name="guestName"
    required
  />

  <input
    type="email"
    placeholder="Guest email"
    [(ngModel)]="newGuest.email"
    name="guestEmail"
    required
  />

  <button type="submit">â• Add Guest</button>
</form>

  <ul>
    <li *ngFor="let guest of registry.guests">
      {{ guest.name }} ({{ guest.email }})
      <span *ngIf="guest.hasRSVP"> âœ… RSVP</span>
      <button *ngIf="!guest.hasRSVP" (click)="markRsvp(guest.id)">
        Mark RSVP
      </button>
    </li>
  </ul>
</section>
